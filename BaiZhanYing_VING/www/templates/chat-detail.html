<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->
<ion-view view-title="{{chat.name|| '业务员'}}" class="messaging-view">
  <ion-header-bar align-title="left" class="bar-positive">

    <div class="buttons ">

      <button class="button button-clear icon-left ion-ios-arrow-back" ng-click="go('tab.chats');">
        聊天
      </button>

    </div>

    <h1 class="title">{{chat.name|| '业务员'}}</h1>

  </ion-header-bar>

<!--  <ion-nav-buttons side="left">
    <button class="button button-icon" ng-click="goBack()">
      <i class="ion-chevron-left"></i>聊天
    </button>
  </ion-nav-buttons>-->
  <ion-content class="content-stable" ng-style="{ bottom: data.keyboardHeight + 'px' }">
    <ion-refresher

            pulling-text="加载更多..."
            refreshing-text="正在加载..."

            on-refresh="doRefresh()">

    </ion-refresher>


    <div ng-repeat="message in messages" ng-class="{ other: message.userId == myId }" class="message">

      <div class="photo icon ion-person"></div>
      <div class="message"><span><p style="font-size: xx-small; margin: 0;">{{message.time}}</p>{{ message.text }}</span>
      </div>

    </div>

  </ion-content>

  <ion-footer-bar keyboard-attach class="bar-stable item-input-inset">
    <!--<button class="button button-clear io ion-android-camera" ng-click="takePhoto()">
    </button>-->
    <label class="item-input-wrapper">
      <input type="text" placeholder="请输入您的信息" on-return="sendMessage()" ng-model="chat.message" on-focus="inputUp()" on-blur="inputDown()" />
    </label>
    <button class="button button-clear" ng-click="sendMessage()">
      发送
    </button>
  </ion-footer-bar>
</ion-view>
